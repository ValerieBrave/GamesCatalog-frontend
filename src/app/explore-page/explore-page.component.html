<div class="header_search">
  <form [formGroup]='searchForm'>
    <mat-form-field>
        <mat-label>Search games</mat-label>
        <input matInput formControlName='gameName' (keydown.enter)='searchGamesByName()'>
    </mat-form-field>
  </form>
</div>
<div class="header__filter">
  <mat-expansion-panel >
      <mat-expansion-panel-header  class="expansion-panel">
      <mat-panel-title>Filters</mat-panel-title>
      </mat-expansion-panel-header>
      <form class="header__filter-list" [formGroup]='filterForm'>
          <mat-form-field class="filter-input">
              <mat-label>Release date</mat-label>
              <input matInput [matDatepicker]="releaseDatePicker"
               formControlName='releaseDate'
               >
              <mat-datepicker-toggle matSuffix [for]="releaseDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #releaseDatePicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="filter-input">
              <mat-label>Genres</mat-label>
              <mat-select formControlName='genre'>
                  <mat-option *ngFor="let genre of genres" [value]='genre.id'>{{genre.name}}</mat-option>
              </mat-select>
          </mat-form-field>
          <mat-form-field class="filter-input">
              <mat-label>Platforms</mat-label>
              <mat-select formControlName='platform'>
                  <mat-option *ngFor="let platform of platforms" [value]='platform.id'>{{platform.name}}</mat-option>
              </mat-select>
          </mat-form-field>
          <mat-form-field class="filter-input">
              <mat-label>Game Engines</mat-label>
              <mat-select formControlName='engine'>
                  <mat-option *ngFor="let engine of gameEngines" [value]='engine.id'>{{engine.name}}</mat-option>
              </mat-select>
          </mat-form-field>
          <mat-form-field class="filter-input">
              <mat-label>PEGI Rating</mat-label>
              <mat-select formControlName='pegiRating'>
                  <mat-option *ngFor="let rating of pegiRatings" [value]='rating'>{{rating}}</mat-option>
              </mat-select>
          </mat-form-field>
          <mat-form-field class="filter-input">
              <mat-label>Game Modes</mat-label>
              <mat-select formControlName='mode'>
                  <mat-option *ngFor="let mode of gameModes" [value]='mode.id'>{{mode.name}}</mat-option>
              </mat-select>
          </mat-form-field>
          <div class="filter__slider-block">
              <mat-label>Rating</mat-label>
              <mat-slider class="filter-input"
                  formControlName = 'rating'
                  max= {{formSliderParams.max}}
                  min= {{formSliderParams.min}}
                  step= {{formSliderParams.step}}
                  thumbLabel=true
                  color = primary>
              </mat-slider>
          </div>                  
      </form>
      <div class="header__button-block">
          <button mat-button (click)="cancelSearch()">CANCEL</button>
          <button mat-button (click)="filterSearch()">SEARCH</button>
      </div>
  </mat-expansion-panel>
</div>

<div class="cards-container"
infiniteScroll
[infiniteScrollDistance]=exploreScrollParams.infiniteScrollDistance
[infiniteScrollThrottle]=exploreScrollParams.infiniteScrollThrottle
(scrolled)="onScroll()"
>
    <div *ngFor="let game of gamesList">
        <a routerLink='game/{{game.id}}'>
            <div class="game-card">
                <div class="game-card_header">
                    <div class="game-card_avatar">
                        <span class="game-card_rating">{{game.rating | number: '2.1-1'}}</span>
                    </div>
                    <div class="game-card_title">
                        <span class="title_name">{{game.name}}</span>
                        <span class="title_date">{{game.first_release_date * 1000 | date}}</span>
                    </div>
                </div>
                <div class="game-card_cover">
                    <img *ngIf="game?.cover_url" class= "cover-image" src={{game?.cover_url}}>
                    <img *ngIf="!game?.cover_url" class="cover-image" src="../../assets/img/game-cover-placeholder.png">
                </div>
                <div class="game-card_summary">
                    <div class="summary__text">
                        {{game.summary}}
                    </div>
                </div>
                <div class="game-card_actions">
                    <mat-icon class="action-icons">favorite</mat-icon>
                    <mat-icon class="action-icons">share</mat-icon>
                </div>
            </div>
        </a>
    </div>
</div>
<div style="position: relative; width: 100%;">
  <ngx-spinner 
    [size] = ngxSpinnerParams.size
    [color] = ngxSpinnerParams.color
    [bdColor] = ngxSpinnerParams.bdColor
    [type] = ngxSpinnerParams.type
    [fullScreen] = ngxSpinnerParams.fullScreen>
  </ngx-spinner>
</div>